

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>hong2p.olf module &mdash; hong2p 0.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="hong2p.roi module" href="hong2p.roi.html" />
    <link rel="prev" title="hong2p.latex module" href="hong2p.latex.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> hong2p
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">hong2p</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="hong2p.html">hong2p package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="hong2p.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hong2p.err.html">hong2p.err module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.latex.html">hong2p.latex module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">hong2p.olf module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.roi.html">hong2p.roi module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.suite2p.html">hong2p.suite2p module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.thor.html">hong2p.thor module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.types.html">hong2p.types module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.util.html">hong2p.util module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.viz.html">hong2p.viz module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.xarray.html">hong2p.xarray module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hong2p.html#module-hong2p">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hong2p</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">hong2p</a> &raquo;</li>
        
          <li><a href="hong2p.html">hong2p package</a> &raquo;</li>
        
      <li>hong2p.olf module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/apidoc/hong2p.olf.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-hong2p.olf">
<span id="hong2p-olf-module"></span><h1>hong2p.olf module<a class="headerlink" href="#module-hong2p.olf" title="Permalink to this headline">¶</a></h1>
<p>Functions for loading YAML metadata created by my tom-f-oconnell/olfactometer repo, and
dealing with the resulting representations of odors delivered during an experiment.</p>
<p>Keeping these functions here rather than in the olfactometer repo because it has other
somewhat heavy dependencies that the analysis side of things will generally not need.</p>
<dl class="py function">
<dt id="hong2p.olf.abbrev">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">abbrev</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abbrevs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">+</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conc_delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'&#64;'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#abbrev"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.abbrev" title="Permalink to this definition">¶</a></dt>
<dd><p>Abbreviates odor name in input, when an abbreviation is available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>odor_str</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – can optionally contain concentration information (followed by</p></li>
<li><p><strong>olf.conc_delimiter</strong> – </p></li>
<li><p><strong>so</strong><strong>)</strong><strong></strong> (<em>if</em>) – </p></li>
<li><p><strong>abbrevs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – dict mapping from input names to the names (abbreviations) you want. if
not passed, the dict <cite>olf.odor2abbrev</cite> is used</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.add_abbrevs_from_odor_lists">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">add_abbrevs_from_odor_lists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_lists</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name2abbrev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yaml_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_abbrev_mismatch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'warn'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#add_abbrevs_from_odor_lists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.add_abbrevs_from_odor_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds name-&gt;abbreviation mappings in odor_lists to odor2abbrev input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>yaml_path</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – this is used included in some print/warning messages, but is not
loaded.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.add_mix_str_index_level">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">add_mix_str_index_level</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mix_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'odor'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#add_mix_str_index_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.add_mix_str_index_level" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.format_mix_from_strs">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">format_mix_from_strs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_strs</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">+</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn_unused_levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#format_mix_from_strs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.format_mix_from_strs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hong2p.olf.format_odor">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">format_odor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_conc_delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conc_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'log10_conc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cast_int_concs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#format_odor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.format_odor" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a dict representation of an odor to a pretty str.</p>
<p>Expected to have at least ‘name’ key, but will also use ‘log10_conc’ (or <cite>conc_key</cite>)
if available, unless <cite>conc=False</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cast_int_concs</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, will convert (log10) concentrations to integer if they
are <cite>np.isclose</cite> to their nearest integer.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">odor</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ethyl acetate&#39;</span><span class="p">,</span> <span class="s1">&#39;log10_conc&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">2</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_odor</span><span class="p">(</span><span class="n">odor</span><span class="p">)</span>
<span class="go">&#39;ethyl acetate @ -2&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.format_odor_list">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">format_odor_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_list</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">+</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#format_odor_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.format_odor_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes list of dicts representing odors for one trial to pretty str.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.is_odor_component_level">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">is_odor_component_level</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#is_odor_component_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.is_odor_component_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if column/level name or Series-key is named to store odor metadata</p>
<p>Values for matching keys should store strings representing <em>one</em>, of potentially
multiple, component odors presented (simultaneously) on a given trial. My convention
for representing multiple components presented together one one trial is to make
multiple variables (e.g. columns), named such as [‘odor1’, ‘odor2’, …], with a
different sufffix number for each component.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.is_odor_var">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">is_odor_var</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#is_odor_var"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.is_odor_var" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if column/level name or Series-key is named to store odor metadata</p>
<p>Values for matching keys should store strings representing <em>one</em>, of potentially
multiple, component odors presented (simultaneously) on a given trial. My convention
for representing multiple components presented together one one trial is to make
multiple variables (e.g. columns), named such as [‘odor1’, ‘odor2’, …], with a
different sufffix number for each component.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.load_stimulus_yaml">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">load_stimulus_yaml</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaml_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#load_stimulus_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.load_stimulus_yaml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hong2p.olf.n_odor_component_levels">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">n_odor_component_levels</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#n_odor_component_levels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.n_odor_component_levels" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.odor_index_sort_key">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">odor_index_sort_key</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_in_name_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#odor_index_sort_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.odor_index_sort_key" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>level</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code>) – one level from a <cite>pd.MultiIndex</cite> with odor metadata.
elements should be odor strings (as <a class="reference internal" href="#hong2p.olf.parse_odor_name" title="hong2p.olf.parse_odor_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_odor_name()</span></code></a> and
<a class="reference internal" href="#hong2p.olf.parse_log10_conc" title="hong2p.olf.parse_log10_conc"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_log10_conc()</span></code></a>).</p></li>
<li><p><strong>sort_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – whether to use odor names as part of sort key. If False, only sorts
on concentrations.</p></li>
<li><p><strong>names_first</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, sorts on names primarily, otherwise sorts on
concentrations primarily. Ignored if sort_names is False.</p></li>
<li><p><strong>name_order</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – list of odor names to use as a fixed order for the names.
Concentrations will be sorted within each name.</p></li>
<li><p><strong>require_in_name_order</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True, raises ValueError if odors with not in
name_order are present. Otherwise sorts such odors alphabetically after
those in name_order.</p></li>
<li><p><strong>warn</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if True and <cite>require_in_name_order=False</cite>, warns about which odors were
not in name_order</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.odor_lists_to_multiindex">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">odor_lists_to_multiindex</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_lists</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_to_n_odors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">format_odor_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#odor_lists_to_multiindex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.odor_lists_to_multiindex" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pad_to_n_odors</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – if <cite>int</cite>, returned <cite>MultiIndex</cite> will have at least this many
levels dedicated to odor components (+ the 1 ‘repeat’ level always
included).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.odordict_sort_key">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">odordict_sort_key</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#odordict_sort_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.odordict_sort_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a hashable key for sorting odors by name, then concentration.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.pad_odor_index_to_n_components">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">pad_odor_index_to_n_components</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#pad_odor_index_to_n_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.pad_odor_index_to_n_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Pads dataframe odor index, so that it has <cite>n</cite> ‘odor&lt;n&gt;’ component levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – target number of odor levels</p>
</dd>
</dl>
<p>Odors presented together (e.g. in one trial, mixed in air), should each have their
own level in the odor MultiIndex, with <cite>olf.solvent_str</cite> used to fill when a given
trial had less components presented at once.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.pad_odor_indices_to_max_components">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">pad_odor_indices_to_max_components</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dfs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#pad_odor_indices_to_max_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.pad_odor_indices_to_max_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Pads odor index each each dataframe to max number of input component levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.panel_odor_orders">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">panel_odor_orders</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">panel2name_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#panel_odor_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.panel_odor_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dict of panel names to ordered unique odor strs (with concentration).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – DataFrame with columns ‘panel’ and &gt;=1 matching <cite>is_odor_var</cite></p></li>
<li><p><strong>panel2name_order</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]) – dict mapping panels to lists of odor names, each in the
desired order</p></li>
<li><p><strong>**kwargs</strong> – passed through to sort_odors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.parse_log10_conc">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">parse_log10_conc</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#parse_log10_conc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.parse_log10_conc" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes formatted odor string to float log10 vol/vol concentration.</p>
<p>Returns <cite>None</cite> if input does not contain <cite>olf.conc_delimiter</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>odor_str</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – contains odor name, and generally also concentration</p></li>
<li><p><strong>require</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if <cite>True</cite>, raises <cite>ValueError</cite> if <cite>olf.conc_delimiter</cite> is not in input</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_log10_conc</span><span class="p">(</span><span class="s1">&#39;ethyl acetate @ -2&#39;</span><span class="p">)</span>
<span class="go">-2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.parse_odor">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">parse_odor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_conc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#parse_odor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.parse_odor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.parse_odor_list">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">parse_odor_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trial_odors_str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">+</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">parse_odor_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#parse_odor_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.parse_odor_list" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code>(<code class="xref py py-data docutils literal notranslate"><span class="pre">OdorDict</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>)]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.parse_odor_name">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">parse_odor_name</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_conc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#parse_odor_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.parse_odor_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes formatted odor string to just the name of the odor.</p>
<p>Returns <cite>None</cite> if input matches <cite>olf.solvent_str</cite>, but otherwise raises ValueError
if <cite>odor_str</cite> does not contain <cite>olf.conc_delimiter</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>odor_str</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – contains odor name and concentration.
name and concentration must be separated by <cite>olf.conc_delimiter</cite> (‘&#64;’), with
whitespace on either side of it.</p></li>
<li><p><strong>require_conc</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – if False, will return <cite>odor_str</cite> if it contains no
<cite>olf.conc_delimiter</cite></p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_odor_name</span><span class="p">(</span><span class="s1">&#39;ethyl acetate @ -2&#39;</span><span class="p">)</span>
<span class="go">&#39;ethyl acetate&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_odor_name</span><span class="p">(</span><span class="n">solvent_str</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.remove_consecutive_repeats">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">remove_consecutive_repeats</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_lists</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#remove_consecutive_repeats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.remove_consecutive_repeats" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list without any consecutive repeats and int # of consecutive repeats.</p>
<p>Raises ValueError if there is a variable number of consecutive repeats.</p>
<p>Assumed that all elements of <cite>odor_lists</cite> are repeated the same number of times,
for each consecutive group of repeats. As long as any repeats are to full
<cite>n_repeats</cite> and consecutive, it is ok for a particular odor (e.g. solvent control)
to be repeated <cite>n_repeats</cite> times in each of several different positions.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">without_repeats</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">remove_consecutive_repeats</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">without_repeats</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">without_repeats</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">remove_consecutive_repeats</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">without_repeats</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;a&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">2</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">without_repeats</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">remove_consecutive_repeats</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">ValueError</span>: <span class="n">variable number of consecutive repeats</span>
</pre></div>
</div>
<p>Wanted to also take a list-of-lists-of-dicts, where each dict represents one odor
and each internal list represents all of the odors on one trial, but the internal
lists (nor the dicts they contain) would not be hashable, and thus cannot work with
Counter as-is.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Hashable</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.save_odor2abbrev_cache">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">save_odor2abbrev_cache</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#save_odor2abbrev_cache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.save_odor2abbrev_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="hong2p.olf.sort_odor_list">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">sort_odor_list</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#sort_odor_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.sort_odor_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a sorted list of dicts representing odors for one trial</p>
<p>Name takes priority over concentration, so with the same set of odor names in each
trial’s odor_list, this should produce a consistent ordering (and same indexes can
be used assuming equal length of all)</p>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.sort_odors">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">sort_odors</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">panel_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">panel2name_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">panel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_panel_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'warn'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#sort_odors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.sort_odors" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts DataFrame by odor index/columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – should have columns/index-level names where <cite>olf.is_odor_var(&lt;col name&gt;)</cite>
returns <cite>True</cite></p></li>
<li><p><strong>panel_order</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – list of str panel names. If passed, must also provide
panel2name_order. Will sort panels first, then odors within each panel.</p></li>
<li><p><strong>panel2name_order</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]) – maps str panel names to lists of odor name orders, for each.
If passed, must also pass panel_order.</p></li>
<li><p><strong>panel</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – to specify panel for input data, if it does not have separate index
level(s) / column indicating which panel each odor belongs to. must have a
matching key in <cite>panel2name_order</cite>. all data will be assumed to belong to
this panel.</p></li>
<li><p><strong>if_panel_missing</strong> – ‘warn’|’err’<a href="#id1"><span class="problematic" id="id2">|</span></a>None</p></li>
<li><p><strong>axis</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – if None, detect which axes to sort (and may sort both). otherwise,
expecting ‘columns’|’index’</p></li>
<li><p><strong>**kwargs</strong> – passed through to <a class="reference internal" href="#hong2p.olf.odor_index_sort_key" title="hong2p.olf.odor_index_sort_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">odor_index_sort_key()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<p>Notes:
Index will be checked first, and if it contains odor information, will sort on that.
Otherwise, will check and sort on matching columns.</p>
<p>Sorts by concentration, then name. <cite>solvent_str</cite> is treated as less than all odors.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;odor1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;B @ -2&#39;</span><span class="p">,</span> <span class="s1">&#39;A @ -2&#39;</span><span class="p">,</span> <span class="s1">&#39;A @ -3&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="s1">&#39;odor2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;solvent&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;delta_f&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">]</span>
<span class="gp">... </span><span class="p">})</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;odor1&#39;</span><span class="p">,</span> <span class="s1">&#39;odor2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Names are sorted alphabetically by default, then within each name they are sorted by
concentration. Pass <cite>names_only=False</cite> to only sort on concentration, or
<cite>names_first=False</cite> to sort on concentrations first.
&gt;&gt;&gt; sort_odors(df)</p>
<blockquote>
<div><p>delta_f</p>
</div></blockquote>
<p>odor1  odor2
A &#64; -3 solvent      0.9
A &#64; -2 solvent      1.2
B &#64; -2 solvent      1.1</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sort_odors</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">name_order</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">])</span>
<span class="go">                delta_f</span>
<span class="go">odor1  odor2</span>
<span class="go">B @ -2 solvent      1.1</span>
<span class="go">A @ -3 solvent      0.9</span>
<span class="go">A @ -2 solvent      1.2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.strip_concs_from_odor_str">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">strip_concs_from_odor_str</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">odor_str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#strip_concs_from_odor_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.strip_concs_from_odor_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Works with input representing either single components or air mixtures of multiple.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – passed thru to <cite>format_odor</cite></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.yaml_data2odor_lists">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">yaml_data2odor_lists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaml_data</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#yaml_data2odor_lists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.yaml_data2odor_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list-of-lists of dictionary representation of odors.</p>
<p>Each dictionary will have at least the key ‘name’ and generally also ‘log10_conc’.</p>
<p>The i-th list contains all of the odors presented simultaneously on the i-th odor
presentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yaml_data</strong> (<em>dict</em>) – parsed contents of stimulus YAML file</p></li>
<li><p><strong>sort</strong> (<em>bool</em>) – (default=True) whether to, within each trial, sort odors.
Irrelevant if there are is only ever a single odor presented on each trial.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="hong2p.olf.yaml_data2pin_lists">
<code class="sig-prename descclassname"><span class="pre">hong2p.olf.</span></code><code class="sig-name descname"><span class="pre">yaml_data2pin_lists</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">yaml_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/olf.html#yaml_data2pin_lists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.olf.yaml_data2pin_lists" title="Permalink to this definition">¶</a></dt>
<dd><p>Pins used as balances can be part of these lists despite not having a corresponding
odor in ‘pins2odors’.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="hong2p.roi.html" class="btn btn-neutral float-right" title="hong2p.roi module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hong2p.latex.html" class="btn btn-neutral float-left" title="hong2p.latex module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Tom O&#39;Connell.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>