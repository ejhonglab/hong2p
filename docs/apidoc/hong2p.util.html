<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hong2p.util module &mdash; hong2p 0.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="hong2p.viz module" href="hong2p.viz.html" />
    <link rel="prev" title="hong2p.types module" href="hong2p.types.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> hong2p
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">hong2p</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="hong2p.html">hong2p package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="hong2p.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hong2p.olf.html">hong2p.olf module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.suite2p.html">hong2p.suite2p module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.thor.html">hong2p.thor module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.types.html">hong2p.types module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">hong2p.util module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.viz.html">hong2p.viz module</a></li>
<li class="toctree-l4"><a class="reference internal" href="hong2p.xarray.html">hong2p.xarray module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="hong2p.html#module-hong2p">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hong2p</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">hong2p</a> &raquo;</li>
          <li><a href="hong2p.html">hong2p package</a> &raquo;</li>
      <li>hong2p.util module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/apidoc/hong2p.util.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-hong2p.util">
<span id="hong2p-util-module"></span><h1>hong2p.util module<a class="headerlink" href="#module-hong2p.util" title="Permalink to this heading"></a></h1>
<p>Common functions for dealing with Thorlabs software output / stimulus metadata /
our databases / movies / CNMF output.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="hong2p.util.IOPerformanceWarning">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">IOPerformanceWarning</span></span><a class="reference internal" href="../_modules/hong2p/util.html#IOPerformanceWarning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.IOPerformanceWarning" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Warning</span></code></p>
<p>Warning that data does not seem to be read/written from fast storage</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.add_fly_id">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">add_fly_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#add_fly_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.add_fly_id" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.add_group_id">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">add_group_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_at_one</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#add_group_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.add_group_id" title="Permalink to this definition"></a></dt>
<dd><p>Adds integer column to identify unique combinations of group_keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataArray</span></code>]]) – DataFrame or DataArray to add metadata to</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.add_missing_odor_cols">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">add_missing_odor_cols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#add_missing_odor_cols"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.add_missing_odor_cols" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.add_recording_id">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">add_recording_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#add_recording_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.add_recording_id" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.addlevel">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">addlevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'index'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#addlevel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.addlevel" title="Permalink to this definition"></a></dt>
<dd><p>Add level to pandas MultiIndex</p>
<p>Intended to be an inverse to pandas.DataFrame.droplevel. pandas.DataFrame.set_index
with <cite>append=True</cite> would work <em>except</em> that there is no <cite>axis</cite> kwarg to that
function, so it does not work for the columns. pandas.DataFrame.unstack is almost
what I would want, but it can seemingly arbitrarily change order of rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> – DataFrame to add MultiIndex levels to</p></li>
<li><p><strong>names</strong> – <cite>str</cite>/sequence-of-<cite>str</cite> name(s) for the new levels</p></li>
<li><p><strong>values</strong> – values for the new levels. If <cite>names</cite> is a sequence, this should be of
the same length.</p></li>
<li><p><strong>axis</strong> – 0/’index’ or 1/’columns’, defauling to ‘index’ as in pandas</p></li>
</ul>
</dd>
</dl>
<p>Returns: DataFrame with MultiIndex containing names/levels from input</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.analysis_fly_dir">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">analysis_fly_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fly</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#analysis_fly_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.analysis_fly_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.analysis_intermediates_root">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">analysis_intermediates_root</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#analysis_intermediates_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.analysis_intermediates_root" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.analysis_output_root">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">analysis_output_root</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#analysis_output_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.analysis_output_root" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.arraylike_cols">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">arraylike_cols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#arraylike_cols"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.arraylike_cols" title="Permalink to this definition"></a></dt>
<dd><p>Returns a list of columns that have only lists or arrays as elements.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.assign_frames_to_trials">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">assign_frames_to_trials</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">movie</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">presentations_per_block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_first_frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odor_onset_frames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#assign_frames_to_trials"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.assign_frames_to_trials" title="Permalink to this definition"></a></dt>
<dd><p>Returns arrays trial_start_frames, trial_stop_frames</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.autoroi_metadata_filename">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">autoroi_metadata_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ijroi_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#autoroi_metadata_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.autoroi_metadata_filename" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.baselined_normed_u8">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">baselined_normed_u8</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#baselined_normed_u8"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.baselined_normed_u8" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.calculate_df_over_f">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">calculate_df_over_f</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trial_start_frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odor_onset_frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trial_stop_frames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#calculate_df_over_f"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.calculate_df_over_f" title="Permalink to this definition"></a></dt>
<dd><p>for b_start, b_end in zip(block_first_frames, block_last_frames):</p>
<blockquote>
<div><dl>
<dt>for c in range(n_footprints):</dt><dd><p># TODO TODO TODO TODO need to be (b_end + 1) since not
# inclusive? (&lt;-fixed) other problems like this elsewhere?????
# TODO maybe smooth less now that df/f is being calculated more
# sensibly…
raw_f[b_start:(b_end + 1), c] = smooth_1d(</p>
<blockquote>
<div><p>raw_f[b_start:(b_end + 1), c], window_len=11</p>
</div></blockquote>
<p>)</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.cell_ids">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">cell_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#cell_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.cell_ids" title="Permalink to this definition"></a></dt>
<dd><p>Takes a DataFrame with ‘cell’ in MultiIndex or columns to unique values.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.check_dir_exists">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">check_dir_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn_returning_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#check_dir_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.check_dir_exists" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.check_no_roi_jumps">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">check_no_roi_jumps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi_xyd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cost</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#check_no_roi_jumps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.check_no_roi_jumps" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.closed_mpl_contours">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">closed_mpl_contours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">footprint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_multiple</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'err'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#closed_mpl_contours"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.closed_mpl_contours" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>if_multiple</strong> (<em>str</em>) – ‘take_largest’|’join’|’err’</p></li>
<li><p><strong>**kwargs</strong> – passed through to matplotlib <cite>ax.contour</cite> call</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.contour2mask">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">contour2mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#contour2mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.contour2mask" title="Permalink to this definition"></a></dt>
<dd><p>Returns a boolean mask True inside contour and False outside.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.correspond_and_renumber_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">correspond_and_renumber_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi_xyd_sequence</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_renumber_rois2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#correspond_and_renumber_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.correspond_and_renumber_rois" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.correspond_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">correspond_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">left_centers_or_seq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*right_centers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_fn=&lt;function</span> <span class="pre">euclidean_dist&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cost=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_plots=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left_name='Left'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">right_name='Right'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_prefix=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_on=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title=''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect_centers=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pairwise_plots=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pairwise_same_style=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_numbers=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jitter=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_points=None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#correspond_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.correspond_rois" title="Permalink to this definition"></a></dt>
<dd><p>Args:
left_centers_or_seq (list): (length n_timepoints) list of (n_rois x 2)</p>
<blockquote>
<div><p>arrays of ROI center coordinates.</p>
</div></blockquote>
<p>Returns:
lr_matches: list of arrays matching ROIs in one timepoint to ROIs in the</p>
<blockquote>
<div><p>next.</p>
</div></blockquote>
<dl class="simple">
<dt>left_unmatched: list of arrays with ROI labels at time t,</dt><dd><p>without a match at time (t + 1)</p>
</dd>
</dl>
<p>right_unmatched: same as left_unmatched, but for (t + 1) with respect to t.</p>
<p>total_costs: array of sums of costs from matching.</p>
<dl class="simple">
<dt>fig: matplotlib figure handle to the figure with all ROIs on it,</dt><dd><p>for modification downstream.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.crop_to_coord_bbox">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">crop_to_coord_bbox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coords</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#crop_to_coord_bbox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.crop_to_coord_bbox" title="Permalink to this definition"></a></dt>
<dd><p>Returns matrix cropped to bbox of coords and bounds.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.crop_to_nonzero">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">crop_to_nonzero</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#crop_to_nonzero"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.crop_to_nonzero" title="Permalink to this definition"></a></dt>
<dd><p>Returns a matrix just large enough to contain the non-zero elements of the
input, and the bounding box coordinates to embed this matrix in a matrix
with indices from (0,0) to the max coordinates in the input matrix.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.data_root">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">data_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#data_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.data_root" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.date_fly_list2paired_thor_dirs">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">date_fly_list2paired_thor_dirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date_fly_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_full_paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">pair_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#date_fly_list2paired_thor_dirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.date_fly_list2paired_thor_dirs" title="Permalink to this definition"></a></dt>
<dd><p>Takes list of (date, fly_num) tuples to pairs of their Thor outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date_fly_list</strong> (<em>list of</em><em> (</em><em>date-like</em><em>, </em><em>int</em><em>)</em>) – (date, fly number) tuples</p></li>
<li><p><strong>n_first</strong> (<em>None</em><em> | </em><em>int</em>) – If passed, only up to this many of pairs are enumerated.
Intended for testing on subsets of data.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – (default=False) If True, prints the fly/ThorImage/ThorSync
directories as they are being iterated over.</p></li>
<li><p><strong>**pair_kwargs</strong> – Passed through to <cite>thor.pair_thor_subdirs</cite>. See arguments to
<cite>thor.pair_thor_dirs</cite> (called by <cite>thor.pair_thor_subdirs</cite>) for most of the
useful options.</p></li>
</ul>
</dd>
</dl>
<p>Each output is of the form:
((date, fly_num), (thorimage_dir&lt;i&gt;, thorsync_dir&lt;i&gt;))</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code>(<code class="docutils literal notranslate"><span class="pre">FlyNum</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>)], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.db_footprints2array">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">db_footprints2array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#db_footprints2array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.db_footprints2array" title="Permalink to this definition"></a></dt>
<dd><p>Returns footprints in an array of dims (shape + (n_footprints,)).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.db_row2footprint">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">db_row2footprint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#db_row2footprint"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.db_row2footprint" title="Permalink to this definition"></a></dt>
<dd><p>Returns dense array w/ footprint from row in cells table.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.df_to_odor_order">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">df_to_odor_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_name1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#df_to_odor_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.df_to_odor_order" title="Permalink to this definition"></a></dt>
<dd><p>Takes a complex-mixture DataFrame to odor names in desired plot order.</p>
<p>Args:
df (pd.DataFrame): should have a ‘original_name1’ column, with names of</p>
<blockquote>
<div><p>odors from complex mixture experiments we have pre-defined odor orders
for.</p>
</div></blockquote>
<dl class="simple">
<dt>observed (bool): (optional, default=True) If True, only return odor names</dt><dd><p>in <cite>df</cite>.</p>
</dd>
<dt>return_name1 (bool): (optional, default=False) If True, corresponding</dt><dd><p>values in ‘name1’ will be returned for each value in ‘original_name1’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.diff_dataframes">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">diff_dataframes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#diff_dataframes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.diff_dataframes" title="Permalink to this definition"></a></dt>
<dd><p>Returns a DataFrame summarizing input differences.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.downsample_movie">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">downsample_movie</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">movie</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_fps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_fps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_overshoot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_uneven_division</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relative_fps_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#downsample_movie"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.downsample_movie" title="Permalink to this definition"></a></dt>
<dd><p>Returns downsampled movie by averaging consecutive groups of frames.</p>
<p>Groups of frames averaged do not overlap.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.drop_incomplete_presentations">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">drop_incomplete_presentations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#drop_incomplete_presentations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.drop_incomplete_presentations" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.drop_orphaned_presentations">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">drop_orphaned_presentations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#drop_orphaned_presentations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.drop_orphaned_presentations" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.euclidean_dist">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">euclidean_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#euclidean_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.euclidean_dist" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.exp_decay">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">exp_decay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#exp_decay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.exp_decay" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.expand_array_cols">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">expand_array_cols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#expand_array_cols"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.expand_array_cols" title="Permalink to this definition"></a></dt>
<dd><p>Expands any list/array entries, with new rows for each entry.</p>
<p>For any columns in <cite>df</cite> that have all list/array elements (at each row),
the column in <cite>out_df</cite> will have the type of single elements from those
arrays.</p>
<p>The length of <cite>out_df</cite> will be the length of the input <cite>df</cite>, multiplied by
the length (should be common in each input row) of each set of list/array
elements.</p>
<p>Other columns have their values duplicated, to match the lengths of the
expanded array values.</p>
<p>Args:
<cite>df</cite> (pd.DataFrame)</p>
<p>Returns:
<cite>out_df</cite> (pd.DataFrame)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.extract_traces_bool_masks">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">extract_traces_bool_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">movie</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">footprints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">footprint_framenums</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#extract_traces_bool_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.extract_traces_bool_masks" title="Permalink to this definition"></a></dt>
<dd><p>Averages the movie within each boolean mask in footprints
to make a matrix of traces (n_frames x n_footprints).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.first_group">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">first_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_cols</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#first_group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.first_group" title="Permalink to this definition"></a></dt>
<dd><p>Returns key tuple and df of first group, grouping df on group_cols.</p>
<p>Just for ease of interactively testing out functions on DataFrames of a
groupby.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.fit_circle_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">fit_circle_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tif</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">avg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">movie</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_str</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cv2.TM_CCOEFF_NORMED'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclusion_radius_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_neighbors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_packing_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_fit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_ijrois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_force_write_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude_dark_regions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark_fraction_beyond_dhist_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_n_rois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">650</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_n_rois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">150</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_scale_max_n_rois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_scale_min_n_rois</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_update_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_factor_shrink_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_threshold_tries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_um_per_pixel_xy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiscale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_diams_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_diams_um</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_diams_from_kmeans_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiscale_strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'one_order'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_d2match_value_scale_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_duplicate_px_scales</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_show_scaled_templates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#fit_circle_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.fit_circle_rois" title="Permalink to this definition"></a></dt>
<dd><p>Even if movie or avg is passed in, tif is used to find metadata and
determine where to save ImageJ ROIs.</p>
<p>_um_per_pixel_xy only used for testing. Normally, XML is found from <cite>tif</cite>,
and that is loaded to get this value.</p>
<p>Returns centers_px, radii_px
(both w/ coordinates and conventions ijrois uses)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.fit_exp_decay">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">fit_exp_decay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">times</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numerical_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#fit_exp_decay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.fit_exp_decay" title="Permalink to this definition"></a></dt>
<dd><p>Returns fit parameters for an exponential decay in the input signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal</strong> (<em>1 dimensional np.ndarray</em>) – time series, beginning at decay onset</p></li>
<li><p><strong>sampling_rate</strong> (<em>float</em>) – sampling rate in Hz</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.footprints_to_flat_cnmf_dims">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">footprints_to_flat_cnmf_dims</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">footprints</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#footprints_to_flat_cnmf_dims"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.footprints_to_flat_cnmf_dims" title="Permalink to this definition"></a></dt>
<dd><p>Takes array of (x, y[, z], n_footprints) to (n_pixels, n_footprints).</p>
<p>There is more than one way this reshaping can be done, and this produces
output as CNMF expects it.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.format_date">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">format_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#format_date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.format_date" title="Permalink to this definition"></a></dt>
<dd><p>Takes a pandas Timestamp or something that can be used to construct one
and returns a str with the formatted date.</p>
<p>Used to name directories by date, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.format_keys">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">format_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fly</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">other_keys</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#format_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.format_keys" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.format_mixture">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">format_mixture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#format_mixture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.format_mixture" title="Permalink to this definition"></a></dt>
<dd><p>Returns <cite>str</cite> representing 2-component odor mixture.</p>
<p>Input can be any of:
- 2 <cite>str</cite> names
- 2 names and concs (n1, n2, c1, c2)
- a pandas.Series / dict with keys <cite>name1</cite>, <cite>name2</cite>, and (optionally)</p>
<blockquote>
<div><p><cite>log10_concvv&lt;1/2&gt;</cite></p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.format_odor_conc">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">format_odor_conc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log10_conc</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#format_odor_conc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.format_odor_conc" title="Permalink to this definition"></a></dt>
<dd><p>Takes <cite>str</cite> odor name and log10 concentration to a formatted <cite>str</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.format_timestamp">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">format_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#format_timestamp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.format_timestamp" title="Permalink to this definition"></a></dt>
<dd><p>Returns human-readable str for timestamp accepted by <cite>pd.Timestamp</cite>, to minute.</p>
<p>Ex: ‘2022-04-07 16:53’</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.full_frame_avg_trace">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">full_frame_avg_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">movie</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#full_frame_avg_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.full_frame_avg_trace" title="Permalink to this definition"></a></dt>
<dd><p>Takes a (t,[z,]x,y) movie to t-length vector of frame averages.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.get_circle_ijroi_input">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">get_circle_ijroi_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">center_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius_px</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#get_circle_ijroi_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.get_circle_ijroi_input" title="Permalink to this definition"></a></dt>
<dd><p>Returns appropriate first arg for my ijroi.write_roi</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.get_fly_dir">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">get_fly_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fly</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#get_fly_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.get_fly_dir" title="Permalink to this definition"></a></dt>
<dd><p>Returns str path fragment as YYYY-MM-DD/&lt;n&gt; for variety of input types</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.git_hash">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">git_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repo_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#git_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.git_hash" title="Permalink to this definition"></a></dt>
<dd><p>Takes any file in a git directory and returns current hash.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.greedy_roi_packing">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">greedy_roi_packing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">match_images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radii_px</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclusion_radius_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_dist2neighbor_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_neighbors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclusion_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_bboxes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_circles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_nums</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiscale_strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'one_order'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_value_weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radii_px_ps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subpixel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_src_img_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_show_match_images</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_show_packing_constraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_show_fit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_initial_single_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#greedy_roi_packing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.greedy_roi_packing" title="Permalink to this definition"></a></dt>
<dd><p>Args:
match_images (np.ndarray / iterable of same): 2-dimensional array of match
value higher means better match of that point to template.</p>
<blockquote>
<div><p>Shape is determined by the number of possible offsets of the template in
the original image, so it is smaller than the original image in each
dimension. As an example, for a 3x3 image and a 2x2 template, the
template can occupy 4 possible positions in the 3x3 image, and the match
image will be 2x2.</p>
</div></blockquote>
<dl class="simple">
<dt>ds (int / iterable of same): integer width (and height) of square template.</dt><dd><p>related to radius, but differ by margin set outside.</p>
</dd>
</dl>
<p>radii_px (int / iterable of same): radius of cell in pixels.</p>
<dl class="simple">
<dt>exclusion_radius_frac (float): approximately 1 - the fraction of two ROI</dt><dd><p>radii that are allowed to overlap.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.gsheet_csv_export_link">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">gsheet_csv_export_link</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_with_edit_link</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_append_gid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#gsheet_csv_export_link"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.gsheet_csv_export_link" title="Permalink to this definition"></a></dt>
<dd><p>Takes a gsheet link copied from browser while editing it, and returns a
URL suitable for reading it as a CSV into a DataFrame.</p>
<p>GID seems to default to 0 for the first sheet, but seems unpredictable for further
sheets in the same document, though you can extract it from the URL in those cases.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.gsheet_to_frame">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">gsheet_to_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_with_edit_link</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bool_fillna_false</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_date_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_trailing_bools</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_ints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize_col_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#gsheet_to_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.gsheet_to_frame" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bool_fillna_false</strong> (<em>bool</em>) – whether to replace missing values in columns that
otherwise only contain True/False with False. will convert column dtype to
‘bool’ as well.</p></li>
<li><p><strong>convert_date_col</strong> (<em>bool</em>) – whether to convert the contents of any columns named
‘date’ (case insensitive) to <cite>pd.Timestamp</cite></p></li>
<li><p><strong>drop_trailing_bools</strong> (<em>bool</em>) – <p>whether to drop blocks of False in bool columns
beyond the last row where all non-bool columns have any non-NaN values.</p>
<p>If a column has data validation for a boolean, the frame will have values
(False as I’ve seen it so far) through to the end of the validation range,
despite the fact that no data has been entered.</p>
</p></li>
<li><p><strong>restore_ints</strong> (<em>bool</em>) – whether to convert columns parsed as floats (because
missing data in rows where only default values for bool cols are present)
to an integer type. Requires that drop_trailing_bools actually gets rid of
all the NaN values in the columns to be converted to ints (float columns
with only whole number / NaN values).</p></li>
<li><p><strong>normalize_col_names</strong> (<em>bool</em>) – (default=False) whether to rename columns using the
<cite>hong2p.util.to_filename</cite> (with <cite>period=False</cite> to that function) as well as
lowercasing.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.has_ijrois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">has_ijrois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ijroiset_dir_or_fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#has_ijrois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.has_ijrois" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.have_all_repeats">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">have_all_repeats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_repeats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#have_all_repeats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.have_all_repeats" title="Permalink to this definition"></a></dt>
<dd><p>Returns True if a recording has all blocks gsheet says it has, w/ full
number of repeats for each. False otherwise.</p>
<p>Requires at least recording_from, comparison, name1, name2, and repeat_num
columns. Can also take prep_date, fly_num, thorimage_id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.have_full_comparisons">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">have_full_comparisons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#have_full_comparisons"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.have_full_comparisons" title="Permalink to this definition"></a></dt>
<dd><p>Requires at least recording_from, comparison, name1, name2 columns.
Can also take prep_date, fly_num, thorimage_id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.ijroi2cv_contour">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">ijroi2cv_contour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#ijroi2cv_contour"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.ijroi2cv_contour" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.ijroi2mask">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">ijroi2mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#ijroi2mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.ijroi2mask" title="Permalink to this definition"></a></dt>
<dd><p>z (None | int): (optional) z-index ROI was drawn on</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.ijroi_filename">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">ijroi_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ijroiset_dir_or_fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">must_exist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#ijroi_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.ijroi_filename" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.ijroi_masks">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">ijroi_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ijroiset_dir_or_fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thorimage_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_xarray</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#ijroi_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.ijroi_masks" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.ijroi_mtime">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">ijroi_mtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ijroiset_dir_or_fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#ijroi_mtime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.ijroi_mtime" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.ijrois2masks">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">ijrois2masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ijrois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_xarray</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#ijrois2masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.ijrois2masks" title="Permalink to this definition"></a></dt>
<dd><p>Transforms ROIs loaded from my ijroi fork to an array full of boolean masks,
of dimensions (shape + (n_rois,)).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.imagej2py_coords">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">imagej2py_coords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#imagej2py_coords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.imagej2py_coords" title="Permalink to this definition"></a></dt>
<dd><p>Since ijroi source seems to have Y as first coord and X as second.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.is_acquisition_host">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">is_acquisition_host</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#is_acquisition_host"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.is_acquisition_host" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.is_array_sorted">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">is_array_sorted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#is_array_sorted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.is_array_sorted" title="Permalink to this definition"></a></dt>
<dd><p>Returns whether 1-dimensional np.ndarray is sorted.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.is_subrecording">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">is_subrecording</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thorimage_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#is_subrecording"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.is_subrecording" title="Permalink to this definition"></a></dt>
<dd><p>Returns whether a recording id matches my GUIs naming convention for the
“sub-recordings” it can create.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.is_subrecording_tiff">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">is_subrecording_tiff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tiff_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#is_subrecording_tiff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.is_subrecording_tiff" title="Permalink to this definition"></a></dt>
<dd><p>Takes a TIFF filename to whether it matches the GUI’s naming convention for
the “sub-recordings” it can create.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.latest_trace_pickles">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">latest_trace_pickles</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#latest_trace_pickles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.latest_trace_pickles" title="Permalink to this definition"></a></dt>
<dd><p>Returns (date, fly, id) indexed DataFrame w/ filename and timestamp cols.</p>
<p>Only returns rows for filenames that had the latest timestamp for the
combination of index values.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.list_motion_corrected_tifs">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">list_motion_corrected_tifs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_rigid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attempt_analysis_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#list_motion_corrected_tifs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.list_motion_corrected_tifs" title="Permalink to this definition"></a></dt>
<dd><p>List motion corrected TIFFs in conventional directory structure on NAS.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.load_metadata">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">load_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#load_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.load_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Returns metadata from YAML, with defaults added.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.load_movie">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">load_movie</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thorimage_dir</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#load_movie"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.load_movie" title="Permalink to this definition"></a></dt>
<dd><p>Loads movie and pre-processes (e.g. flipping) if metadata requests it.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.load_odor_metadata">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">load_odor_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stimfile_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#load_odor_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.load_odor_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Returns odor metadata loaded from pickle and additional computed values.</p>
<p>Additional values are added into the dictionary loaded from the pickle.
In some cases, this can overwrite the loaded values.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.load_stimfile">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">load_stimfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stimfile_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#load_stimfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.load_stimfile" title="Permalink to this definition"></a></dt>
<dd><p>Loads odor metadata stored in a pickle.</p>
<p>These metadata files are generated by scripts under
<cite>ejhonglab/cutpast_arduino_stimuli</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.load_template_data">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">load_template_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">err_if_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#load_template_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.load_template_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.make_test_centers">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">make_test_centers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial_n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(256,</span> <span class="pre">256)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exlusion_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">round_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diam_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_diameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#make_test_centers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.make_test_centers" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.mb_team_gsheet">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">mb_team_gsheet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">natural_odors_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_nonexistant_dirs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_inferred_paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_excluded_on_disk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#mb_team_gsheet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.mb_team_gsheet" title="Permalink to this definition"></a></dt>
<dd><p>Returns a pandas.DataFrame with data on flies and MB team recordings.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.md5">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">md5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#md5"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.md5" title="Permalink to this definition"></a></dt>
<dd><p>Calculates MD5 hash on file with name <cite>fname</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.merge_ijroi_masks">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">merge_ijroi_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">masks</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#merge_ijroi_masks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.merge_ijroi_masks" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>masks</strong> (<em>xarray.DataArray</em>) – must have at least dims ‘x’, ‘y’, and ‘roi’.
‘roi’ should be indexed by a MultiIndex and one of the levels should have
the name of the <cite>on</cite> argument. Currently expect the dtype to be ‘bool’.</p></li>
<li><p><strong>label_fn</strong> (<em>callable</em>) – function mapping the values of the <cite>on</cite> column to labels
for the ROIs. Only ROIs created via merging will be given these labels,
while unmerged ROIs will recieve unique number labels. Defaults to a
function that takes strings, removes trailing/leading underscores, and
parses an int from what remains.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.merge_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">merge_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ijroi_prefix'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">merge_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_no_overlap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#merge_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.merge_rois" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rois</strong> (<em>xarray.DataArray</em>) – must have at least dims ‘x’, ‘y’, and ‘roi’.
‘roi’ should be indexed by a MultiIndex and one of the levels should have
the name of the <cite>on</cite> argument. Currently expect the dtype to be ‘bool’.</p></li>
<li><p><strong>on</strong> (<em>str</em>) – name of other ROI metadata dimension to merge on</p></li>
<li><p><strong>label_fn</strong> (<em>callable</em>) – function mapping the values of the <cite>on</cite> column to labels
for the ROIs. Only ROIs created via merging will be given these labels,
while unmerged ROIs will recieve unique number labels. Defaults to the
identity function.</p></li>
<li><p><strong>check_no_overlap</strong> (<em>bool</em>) – (optional, default=False) If True, checks that no
merged rois shared any pixels before being merged. If merged ROIs are all
on different planes, this should be True because ImageJ ROIs are defined on
single planes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.merge_single_plane_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">merge_single_plane_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_overlap_frac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_dilations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#merge_single_plane_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.merge_single_plane_rois" title="Permalink to this definition"></a></dt>
<dd><p>For handling single plane ROIs that are on adjacent Z planes, and correspond to the
same biological feature. This is to merge the single plane ROIs that suite2p
outputs.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.metadata_filename">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">metadata_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thorimage_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#metadata_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.metadata_filename" title="Permalink to this definition"></a></dt>
<dd><p>Returns filename of YAML for extra metadata.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.missing_odor_pairs">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">missing_odor_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#missing_odor_pairs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.missing_odor_pairs" title="Permalink to this definition"></a></dt>
<dd><p>Requires at least recording_from, comparison, name1, name2 columns.
Can also take prep_date, fly_num, thorimage_id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.missing_repeats">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">missing_repeats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_repeats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#missing_repeats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.missing_repeats" title="Permalink to this definition"></a></dt>
<dd><p>Requires at least recording_from, comparison, name1, name2, and repeat_num
columns. Can also take prep_date, fly_num, thorimage_id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.most_recent_contained_file_mtime">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">most_recent_contained_file_mtime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#most_recent_contained_file_mtime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.most_recent_contained_file_mtime" title="Permalink to this definition"></a></dt>
<dd><p>Recursively find the <cite>os.path.getmtime</cite> of the most recently modified file</p>
<p>Testing on Ubuntu, this does not recurse into symlinks to directories, as I want for
at least current use case.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.motion_corrected_tiff_filename">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">motion_corrected_tiff_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fly_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thorimage_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#motion_corrected_tiff_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.motion_corrected_tiff_filename" title="Permalink to this definition"></a></dt>
<dd><p>Takes vars identifying recording to the name of a motion corrected TIFF
for it. Non-rigid preferred over rigid. Relies on naming convention.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.movie_blocks">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">movie_blocks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tif</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">movie</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_gsheet_to_restrict_blocks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stimfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#movie_blocks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.movie_blocks" title="Permalink to this definition"></a></dt>
<dd><p>Returns list of arrays, one per continuous acquisition.</p>
<p><cite>tif</cite> must be named and placed according to convention, and a .mat file
created from <cite>ejhonglab/matlab_kc_plane</cite> (typically run via <cite>populate_db.py</cite>
in what is now my <cite>kc_natural_mixes</cite> repo) must exist in the conventional
path under the analysis root. This .mat file is used for the timing
information (ultimately derived mainly from ThorSync data).</p>
<p>Total length along time dimension should be preserved from input TIFF.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.n_expected_repeats">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">n_expected_repeats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#n_expected_repeats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.n_expected_repeats" title="Permalink to this definition"></a></dt>
<dd><p>Returns expected # repeats given DataFrame w/ repeat_num col.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.no_skipped_comparisons">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">no_skipped_comparisons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#no_skipped_comparisons"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.no_skipped_comparisons" title="Permalink to this definition"></a></dt>
<dd><p>Requires at least recording_from and comparison columns.
Can also take prep_date, fly_num, and thorimage_id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.numpy2xarray_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">numpy2xarray_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#numpy2xarray_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.numpy2xarray_rois" title="Permalink to this definition"></a></dt>
<dd><p>Takes numpy array of shape ([z,]y,x,roi) to labelled xarray.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>roi_indices</strong> (<em>None</em><em> | </em><em>dict</em>) – values must be iterables of length equal to number of
ROIs. ‘roi_num’ will be included as an additional ROI index regardless.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.odorset_name">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">odorset_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_or_odornames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#odorset_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.odorset_name" title="Permalink to this definition"></a></dt>
<dd><p>Returns name for set of odors in DataFrame.</p>
<p>Looks at odors in original_name1 column. Name used to lookup desired
plotting order for the odors in the set.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.pair_ordering">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">pair_ordering</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comparison_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#pair_ordering"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.pair_ordering" title="Permalink to this definition"></a></dt>
<dd><p>Takes a df w/ name1 &amp; name2 to a dict of their tuples to order int.</p>
<p>Order integers start at 0 and do not skip any numbers.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.paired_thor_dirs">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">paired_thor_dirs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matching_substrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_redone</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_skips</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_fast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_full_paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">pair_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#paired_thor_dirs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.paired_thor_dirs" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>matching_substrs</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – If passed, only experiments whose ThorImage path contains at
least one of these substring will be included.</p></li>
<li><p><strong>n_first</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – If passed, only up to this many of pairs are enumerated.
Intended for testing on subsets of data.</p></li>
<li><p><strong>verbose</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True, prints the fly/ThorImage/ThorSync directories as they are
being iterated over.</p></li>
<li><p><strong>**pair_kwargs</strong> – Passed through to <cite>thor.pair_thor_subdirs</cite>. See arguments to
<cite>thor.pair_thor_dirs</cite> (called by <cite>thor.pair_thor_subdirs</cite>) for most of the
useful options.</p></li>
</ul>
</dd>
</dl>
<p>Each output is of the form:
((date, fly_num), (thorimage_dir&lt;i&gt;, thorsync_dir&lt;i&gt;))</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">NewType()</span></code>(<code class="docutils literal notranslate"><span class="pre">FlyNum</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>)], <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.parent_recording_id">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">parent_recording_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tiffname_or_thorimage_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#parent_recording_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.parent_recording_id" title="Permalink to this definition"></a></dt>
<dd><p>Returns recording id for recording subrecording was derived from.</p>
<p>Input can be a TIFF filename or recording id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.plot_circles">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">plot_circles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">draw_on</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radii</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#plot_circles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.plot_circles" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.point_idx">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">point_idx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xys_to_check</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pt_xy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">swap_xy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#point_idx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.point_idx" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.print_all_stimfile_odorsets">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">print_all_stimfile_odorsets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#print_all_stimfile_odorsets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.print_all_stimfile_odorsets" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.print_block_frames">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">print_block_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_first_frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_last_frames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#print_block_frames"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.print_block_frames" title="Permalink to this definition"></a></dt>
<dd><p>Prints block numbers and the corresponding start / stop frames.</p>
<p>For subsetting TIFF in ImageJ / other manual analysis.</p>
<p>Prints frame numbers 1-indexed, but takes 0-indexed frames.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.print_color">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">print_color</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#print_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.print_color" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.print_thor_paths">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">print_thor_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sync_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_full_paths</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#print_thor_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.print_thor_paths" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.print_trial_odors">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">print_trial_odors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">odor_onset_frames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#print_trial_odors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.print_trial_odors" title="Permalink to this definition"></a></dt>
<dd><p>data should be as the output of <cite>load_odor_metadata</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.py2imagej_coords">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">py2imagej_coords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#py2imagej_coords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.py2imagej_coords" title="Permalink to this definition"></a></dt>
<dd><p>Since ijroi source seems to have Y as first coord and X as second.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.raw_data_root">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">raw_data_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#raw_data_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.raw_data_root" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.raw_fly_dir">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">raw_fly_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fly</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">short</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#raw_fly_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.raw_fly_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>short</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If True, returns in format YYYY-MM-DD/&lt;fly #&gt;/&lt;ThorImage dir&gt;, without
the prefix specifying the full path. Intended for creating more readable
paths, where absolute paths are not required.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.recording_df2keys">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">recording_df2keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#recording_df2keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.recording_df2keys" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.renumber_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">renumber_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matches_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centers_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#renumber_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.renumber_rois" title="Permalink to this definition"></a></dt>
<dd><p>Each sequence of matched ROIs gets an increasing integer identifier
(including length-1 sequences, i.e. unmatched stuff).</p>
<p>Returns lists of IDs in each element of input list and centers,
re-indexed with new IDs.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.renumber_rois2">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">renumber_rois2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">matches_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centers_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#renumber_rois2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.renumber_rois2" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.roi_center">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">roi_center</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#roi_center"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.roi_center" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.roi_centers">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">roi_centers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rois</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#roi_centers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.roi_centers" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.roi_jumps">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">roi_jumps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roi_xyd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cost</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#roi_jumps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.roi_jumps" title="Permalink to this definition"></a></dt>
<dd><p>Returns dict of first_frame -&gt; list of (x, y, str(point idx)) for each
time an ROI jumps by &gt;= max_cost on consecutive frames.</p>
<p>correspond_rois should have not matched these points.</p>
<p>Output suitable for debug_points kwarg to correspond_rois</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.rois2best_planes_only">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">rois2best_planes_only</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rois</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi_quality</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#rois2best_planes_only"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.rois2best_planes_only" title="Permalink to this definition"></a></dt>
<dd><p>Currently assumes input only has non-zero values in a single plane for a given
unique combination of ROI identifier variables.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.scale_template">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">scale_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">um_per_pixel_xy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_cell_diam_um</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_cell_diam_px</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_template_d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#scale_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.scale_template" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.set_data_root">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">set_data_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_data_root</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#set_data_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.set_data_root" title="Permalink to this definition"></a></dt>
<dd><p>Sets data root, so future calls to <cite>data_root</cite> will return the input.</p>
<p>You may either use this function or set one of the environment variables
that the <cite>data_root</cite> function checks.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.shorten_path">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">shorten_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_parts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#shorten_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.shorten_path" title="Permalink to this definition"></a></dt>
<dd><p>Returns a string containing just the last n_parts (default=3) of input path.</p>
<p>For making IDs / easier-to-read paths, when the full path isn’t required.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.shorten_stimfile_path">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">shorten_stimfile_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stimfile_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stimfile_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#shorten_stimfile_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.shorten_stimfile_path" title="Permalink to this definition"></a></dt>
<dd><p>Shortens absolute stimulus YAML path to one relative to stimfile_dir.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.skipped_comparison_nums">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">skipped_comparison_nums</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#skipped_comparison_nums"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.skipped_comparison_nums" title="Permalink to this definition"></a></dt>
<dd><p>Requires at least recording_from and comparison columns.
Can also take prep_date, fly_num, and thorimage_id.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.smooth_1d">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">smooth_1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">11</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hanning'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#smooth_1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.smooth_1d" title="Permalink to this definition"></a></dt>
<dd><p>smooth the data using a window with requested size.</p>
<p>This method is based on the convolution of a scaled window with the signal.
The signal is prepared by introducing reflected copies of the signal
(with the window size) in both ends so that transient parts are minimized
in the begining and end part of the output signal.</p>
<dl>
<dt>input:</dt><dd><p>x: the input signal
window_len: the dimension of the smoothing window; should be an odd</p>
<blockquote>
<div><p>integer</p>
</div></blockquote>
<dl class="simple">
<dt>window: the type of window from ‘flat’, ‘hanning’, ‘hamming’,</dt><dd><p>‘bartlett’, ‘blackman’ flat window will produce a moving average
smoothing.</p>
</dd>
</dl>
</dd>
<dt>output:</dt><dd><p>the smoothed signal</p>
</dd>
</dl>
<p>example:</p>
<p>t=linspace(-2,2,0.1)
x=sin(t)+randn(len(t))*0.1
y=smooth_1d(x)</p>
<p>see also:</p>
<p>numpy.hanning, numpy.hamming, numpy.bartlett, numpy.blackman, numpy.convolve
scipy.signal.lfilter</p>
<p>TODO: the window parameter could be the window itself if an array instead of
a string
NOTE: length(output) != length(input), to correct this: return
y[(window_len/2-1):-(window_len/2)] instead of just y.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.split_odor_w_conc">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">split_odor_w_conc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row_or_str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#split_odor_w_conc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.split_odor_w_conc" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.stable_rois">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">stable_rois</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lr_matches</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#stable_rois"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.stable_rois" title="Permalink to this definition"></a></dt>
<dd><p>Takes a list of n_cells x 2 matrices, with each row taking an integer ROI
label from one set of labels to the other.</p>
<p>Input is as first output of correspond_rois.</p>
<p>Returns:
stable_cells: a n_stable_cells x (len(lr_matches) + 1) matrix, where rows</p>
<blockquote>
<div><p>represent different labels for the same real cells. Columns have the
set of stable cells IDs, labelled as the inputs are.</p>
</div></blockquote>
<dl class="simple">
<dt>new_lost: a (len(lr_matches) - 1) length list of IDs lost when matching</dt><dd><p>lr_matches[i] to lr_matches[i + 1]. only considers IDs that had
been stable across all previous pairs of matchings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.start_color">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">start_color</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#start_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.start_color" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.stimfile_odorset">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">stimfile_odorset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stimfile_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#stimfile_odorset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.stimfile_odorset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.stimfile_root">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">stimfile_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#stimfile_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.stimfile_root" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.stimulus_yaml_from_thorimage">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">stimulus_yaml_from_thorimage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thorimage_dir_or_xml</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stimfile_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#stimulus_yaml_from_thorimage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.stimulus_yaml_from_thorimage" title="Permalink to this definition"></a></dt>
<dd><p>Returns absolute path to stimulus YAML file from note field in ThorImage XML.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thorimage_dir_or_xml</strong> – path to ThorImage output directory or XML Element
containing parsed contents of the corresponding Experiment.xml file.</p></li>
<li><p><strong>stimfile_dir</strong> (<em>str</em>) – (optional) directory containing stimulus .yaml files.
If not passed, <cite>stimfile_root()</cite> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>IOError if stimulus file directory does not exist</strong> – </p></li>
<li><p><strong>ValueError if multiple</strong><strong> or </strong><strong>no substrings of note field end with .yaml</strong> – </p></li>
</ul>
</dd>
</dl>
<p>XML should contain a manually-entered path relative to where the olfactometer code
that generated it was run, but assuming it was copied to the appropriate location
(directly under <cite>stimfile_dir</cite> if passed or <cite>stimfile_root()</cite> otherwise), this
absolute path should exist.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.stop_color">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">stop_color</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#stop_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.stop_color" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.subrecording_tiff_blocks">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">subrecording_tiff_blocks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tiff_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#subrecording_tiff_blocks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.subrecording_tiff_blocks" title="Permalink to this definition"></a></dt>
<dd><p>Returns tuple of int (start, stop) block numbers subrecording contains.</p>
<p>Block numbers start at 0.</p>
<p>Requires that is_subrecording_tiff(tiff_filename) would return True.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.subrecording_tiff_blocks_df">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">subrecording_tiff_blocks_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#subrecording_tiff_blocks_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.subrecording_tiff_blocks_df" title="Permalink to this definition"></a></dt>
<dd><p>Takes a series w/ TIFF name in series.name to (start, stop) block nums.</p>
<p>(series.name must be a TIFF path)</p>
<p>Same behavior as <cite>subrecording_tiff_blocks</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.template_data_file">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">template_data_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#template_data_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.template_data_file" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.template_match">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">template_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_str</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cv2.TM_CCOEFF'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#template_match"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.template_match" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.thor2tiff">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">thor2tiff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_dir</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_basename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_exists</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'err'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flip_lr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_round_trip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#thor2tiff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.thor2tiff" title="Permalink to this definition"></a></dt>
<dd><p>Converts ThorImage .raw file to .tif file in same directory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>if_exists</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – ‘load’, ‘ignore’, ‘overwrite’, or ‘err’</p></li>
<li><p><strong>flip_lr</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>]) – If True, flip the raw movie along the left/right axis, to make
experiments including both left/right side data more comparable.
If True/False, default output basename will be ‘flipped.tif’. If None,
default output basename will remain ‘raw.tif’.</p></li>
<li><p><strong>check_round_trip</strong> – If True, and a TIFF was written, read it and check it is equal
to data loaded from ThorImage raw.</p></li>
</ul>
</dd>
</dl>
<p>Returns an np.ndarray movie if TIFF was created OR if if_exists=’load’ and
the corresponding TIFF already exists. Returns None if if_exists=’ignore’ and the
corresponding TIFF already exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.thorimage2yaml_info_and_odor_lists">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">thorimage2yaml_info_and_odor_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thorimage_dir_or_xml</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stimfile_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#thorimage2yaml_info_and_odor_lists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.thorimage2yaml_info_and_odor_lists" title="Permalink to this definition"></a></dt>
<dd><p>Returns yaml_path, yaml_data, odor_lists</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thorimage_dir_or_xml</strong> – path to ThorImage output directory or XML Element object
parsed from corresponding Experiment.xml file</p></li>
<li><p><strong>stimfile_dir</strong> (<em>str</em>) – (optional) directory containing stimulus .yaml files.
If not passed, <cite>stimfile_root()</cite> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>path to YAML</p>
<p>yaml_data (dict): loaded contents of <cite>yaml_path</cite></p>
<dl class="simple">
<dt>odor_lists (list-of-lists-of-dicts): each list this contains is a representation</dt><dd><p>of all the odors presented together on a given trial</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>yaml_path (str)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.thorimage_dir">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">thorimage_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thorimage_id</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#thorimage_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.thorimage_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.thorimage_dir_input">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">thorimage_dir_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#thorimage_dir_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.thorimage_dir_input" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.thorsync_dir">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">thorsync_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_thorsync_dir</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#thorsync_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.thorsync_dir" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.tiff_filename2keys">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">tiff_filename2keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tiff_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#tiff_filename2keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.tiff_filename2keys" title="Permalink to this definition"></a></dt>
<dd><p>Takes TIFF filename to pd.Series w/ ‘date’,’fly_num’,’thorimage_id’ keys.</p>
<p>TIFF must be placed and named according to convention, because the
date and fly_num are taken from names of some of the containing directories.</p>
<p>Works with TIFFs either under <cite>raw_data_root</cite> or <cite>analysis_output_root</cite>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.tiff_ijroi_filename">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">tiff_ijroi_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tiff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confirm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gui_confirm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gui_fallback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gui</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'qt5'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#tiff_ijroi_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.tiff_ijroi_filename" title="Permalink to this definition"></a></dt>
<dd><p>Takes a tiff path to corresponding ImageJ ROI file, assuming a certain
naming convention and folder structure.</p>
<p>Automatic search for ROI will only check same folder as the TIFF passed in.</p>
<p>Options for fallback to manual selection / confirmation of appropriate
ROI file.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.tiff_thorimage_id">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">tiff_thorimage_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tiff_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#tiff_thorimage_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.tiff_thorimage_id" title="Permalink to this definition"></a></dt>
<dd><p>Takes a path to a TIFF and returns ID to identify recording within
(date, fly). Relies on naming convention.</p>
<p>Works for input that is either a raw TIFF or a motion corrected TIFF,
the latter of which should have a conventional suffix indicating the
type of motion correction (‘_nr’ / ‘_rig’).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.tiff_title">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">tiff_title</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tif</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#tiff_title"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.tiff_title" title="Permalink to this definition"></a></dt>
<dd><p>Returns abbreviation of TIFF filename for use in titles.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.to_filename">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">to_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#to_filename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.to_filename" title="Permalink to this definition"></a></dt>
<dd><p>Take a str and normalizes it a bit to make it a better filename prefix.</p>
<p>E.g. taking a plot title and using it to derive a filename for saving the
plot.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.u8_color">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">u8_color</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">draw_on</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#u8_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.u8_color" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.version_info">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">version_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">used_for</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_git</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#version_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.version_info" title="Permalink to this definition"></a></dt>
<dd><p>Takes module or string path to file in Git repo to a dict with version
information (with keys and values the database will accept).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="hong2p.util.write_tiff">
<span class="sig-prename descclassname"><span class="pre">hong2p.util.</span></span><span class="sig-name descname"><span class="pre">write_tiff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tiff_filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">movie</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hong2p/util.html#write_tiff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hong2p.util.write_tiff" title="Permalink to this definition"></a></dt>
<dd><p>Write a TIFF loading the same as the TIFFs we create with ImageJ.</p>
<p>TIFFs are written in big-endian byte order to be readable by <cite>imread_big</cite>
from MATLAB file exchange.</p>
<p>Dimensions of input should be (t,[z,],y,x).</p>
<p>Metadata may not be correct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dims</strong> – may or may not have the same meaning as <cite>tifffile.imsave</cite> <cite>axes</cite> kwarg</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hong2p.types.html" class="btn btn-neutral float-left" title="hong2p.types module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hong2p.viz.html" class="btn btn-neutral float-right" title="hong2p.viz module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Tom O&#39;Connell.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>